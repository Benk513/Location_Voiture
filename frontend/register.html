<!DOCTYPE html>
<html lang="zxx">
  <head>
    <title>Rentaly - Multipurpose Vehicle Car Rental Website Template</title>
    <link rel="icon" href="images/icon.png" type="image/gif" sizes="16x16" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      content="Rentaly - Multipurpose Vehicle Car Rental Website Template"
      name="description"
    />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb" />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/coloring.css" rel="stylesheet" type="text/css" />
    <!-- color scheme -->
    <link
      id="colors"
      href="css/colors/scheme-01.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body>
    <div id="wrapper">
      <!-- page preloader begin -->
      <div id="de-preloader"></div>
      <!-- page preloader close -->

      <!-- header begin -->
      <header class="transparent scroll-light has-topbar">
        <div id="topbar" class="topbar-dark text-light">
          <div class="container">
            <div class="topbar-left xs-hide">
              <div class="topbar-widget">
                <div class="topbar-widget">
                  <a href="#"><i class="fa fa-phone"></i>+208 333 9296</a>
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-envelope"></i>contact@rentaly.com</a
                  >
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-clock-o"></i>Mon - Fri 08.00 - 18.00</a
                  >
                </div>
              </div>
            </div>

            <div class="topbar-right">
              <div class="social-icons">
                <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                <a href="#"><i class="fa fa-youtube fa-lg"></i></a>
                <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                <a href="#"><i class="fa fa-instagram fa-lg"></i></a>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="de-flex sm-pt10">
                <div class="de-flex-col">
                  <div class="de-flex-col">
                    <!-- logo begin -->
                    <div id="logo">
                      <a href="index.html">
                        <img
                          class="logo-1"
                          src="images/logo-light.png"
                          alt=""
                        />
                        <img class="logo-2" src="images/logo.png" alt="" />
                      </a>
                    </div>
                    <!-- logo close -->
                  </div>
                </div>
                <div class="de-flex-col header-col-mid">
                  <ul id="mainmenu">
                    <li>
                      <a class="menu-item" href="index.html">Home</a>
                      <ul>
                        <li>
                          <a class="menu-item new" href="02_dark-index-1.html"
                            >Homepage 1 Dark</a
                          >
                        </li>
                        <li>
                          <a class="menu-item new" href="02_dark-index-2.html"
                            >Homepage 2 Dark</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index.html"
                            >Homepage Main</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index-2.html"
                            >Homepage 2</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index-3.html"
                            >Homepage 3</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index-4.html"
                            >Homepage 4</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index-5.html"
                            >Homepage 5</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="index-6.html"
                            >Homepage 6</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="cars.html">Cars</a>
                      <ul>
                        <li>
                          <a class="menu-item" href="cars.html">Cars List 1</a>
                        </li>
                        <li>
                          <a class="menu-item" href="02_dark-cars.html"
                            >Cars List 1 Dark</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="cars-list.html"
                            >Cars List 2</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="02_dark-cars-list.html"
                            >Cars List 2 Dark</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="car-single.html"
                            >Cars Single</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="02_dark-car-single.html"
                            >Cars Single Dark</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="quick-booking.html">Booking</a>
                      <ul>
                        <li>
                          <a class="menu-item new" href="quick-booking.html"
                            >Quick Booking</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="booking.html">Booking</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="account-dashboard.html"
                        >My Account</a
                      >
                      <ul>
                        <li>
                          <a class="menu-item" href="account-dashboard.html"
                            >Dashboard</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="account-profile.html"
                            >My Profile</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="account-booking.html"
                            >My Orders</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="account-favorite.html"
                            >My Favorite Cars</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="#">Pages</a>
                      <ul>
                        <li>
                          <a class="menu-item" href="about.html">About Us</a>
                        </li>
                        <li>
                          <a class="menu-item" href="contact.html">Contact</a>
                        </li>
                        <li>
                          <a class="menu-item" href="login.html">Login</a>
                        </li>
                        <li>
                          <a class="menu-item" href="register.html">Register</a>
                        </li>
                        <li>
                          <a class="menu-item" href="404.html">Page 404</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="#">News</a>
                      <ul>
                        <li>
                          <a
                            class="menu-item"
                            href="news-standart-right-sidebar.html"
                            >News Standard</a
                          >
                          <ul>
                            <li>
                              <a
                                class="menu-item"
                                href="news-standart-right-sidebar.html"
                                >Right Sidebar</a
                              >
                            </li>
                            <li>
                              <a
                                class="menu-item"
                                href="news-standart-left-sidebar.html"
                                >Left Sidebar</a
                              >
                            </li>
                            <li>
                              <a
                                class="menu-item"
                                href="news-standart-no-sidebar.html"
                                >No Sidebar</a
                              >
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a
                            class="menu-item"
                            href="news-grid-right-sidebar.html"
                            >News Grid</a
                          >
                          <ul>
                            <li>
                              <a
                                class="menu-item"
                                href="news-grid-right-sidebar.html"
                                >Right Sidebar</a
                              >
                            </li>
                            <li>
                              <a
                                class="menu-item"
                                href="news-grid-left-sidebar.html"
                                >Left Sidebar</a
                              >
                            </li>
                            <li>
                              <a
                                class="menu-item"
                                href="news-grid-no-sidebar.html"
                                >No Sidebar</a
                              >
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="#">Elements</a>
                      <ul>
                        <li>
                          <a class="menu-item" href="preloader.html"
                            >Preloader</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="icon-boxes.html"
                            >Icon Boxes</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="badge.html">Badge</a>
                        </li>
                        <li>
                          <a class="menu-item" href="counters.html">Counters</a>
                        </li>
                        <li>
                          <a class="menu-item" href="gallery-popup.html"
                            >Gallery Popup</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="icons-elegant.html"
                            >Icons Elegant</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="icons-etline.html"
                            >Icons Etline</a
                          >
                        </li>
                        <li>
                          <a class="menu-item" href="icons-font-awesome.html"
                            >Icons Font Awesome</a
                          >
                        </li>
                        <li><a class="menu-item" href="map.html">Map</a></li>
                        <li>
                          <a class="menu-item" href="modal.html">Modal</a>
                        </li>
                        <li>
                          <a class="menu-item" href="popover.html">Popover</a>
                        </li>
                        <li><a class="menu-item" href="tabs.html">Tabs</a></li>
                        <li>
                          <a class="menu-item" href="tooltips.html">Tooltips</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="de-flex-col">
                  <div class="menu_side_area">
                    <a href="login.html" class="btn-main">Se connecter</a>
                    <span id="menu-btn"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- header close -->
      <!-- content begin -->
      <div class="no-bottom no-top" id="content">
        <div id="top"></div>

        <!-- section begin -->
        <section id="subheader" class="jarallax text-light">
          <img
            src="images/background/subheader.jpg"
            class="jarallax-img"
            alt=""
          />
          <div class="center-y relative text-center">
            <div class="container">
              <div class="row">
                <div class="col-md-12 text-center">
                  <h1>Creation de compte</h1>
                </div>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </section>
        <!-- section close -->

        <section aria-label="section">
          <div class="container">
            <div class="row">
              <div class="col-md-8 offset-md-2">
                <h3>Vous n'avez pas encore un compte ? Inscrivez vous .</h3>
                <p>
                  Rejoignez notre site et profitez des services de location de
                  voitures.
                </p>
                <div id="mail_success" class="success">
                    Inscription effectué avec succes!
                  </div>
                  <div id="mail_fail" class="error">
                    Un problème est survenu lors de l'inscription!
                  </div>
                <div class="spacer-10"></div>

                <form name="contactForm" id="register_form" class="form-border">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="field-set">
                        <label>Nom et Prenom:</label>
                        <input type="text" id="nom" class="form-control" />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="field-set">
                        <label>Adresse Email:</label>
                        <input type="email" id="email" class="form-control" />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="field-set">
                        <label>Numero de Telephone:</label>
                        <input
                          type="text"
                          name="phone"
                          id="telephone"
                          class="form-control"
                        />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="field-set">
                        <label>Mot de passe:</label>
                        <input
                          type="password"
                          name="password"
                          id="motDePasse"
                          class="form-control"
                        />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="field-set">
                        <label>Confirmation de mot de passe :</label>
                        <input
                          type="password"
                          name="re-password"
                          id="confirmationMotDePasse"
                          class="form-control"
                        />
                      </div>
                    </div>

                    <div class="col-md-6 mb20">
                      <label> Quel type de compte voulez vous creer:</label>
                      <select
                        class="form-select"
                        aria-label="Default select example"
                        id="role"
                      >
                        <!-- <option selected>Quel type de compte voulez vous creer</option> -->
                        <option value="locataire">Locataire</option>
                        <option value="proprietaire">Proprietaire</option>
                      </select>
                    </div>
                    <div class="col-md-6 mb20">
                      <label>Adresse :</label>
                      <input type="text" id="adresse" class="form-control" />
                    </div>

                    <div class="col-md-12">
                      <div id="submit" class="pull-left">
                        <button type="submit" class="btn-main color-2">
                          S'inscrire Maintenant
                        </button>
                      </div>

                    
                      <div class="clearfix"></div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </section>
      </div>
      <!-- content close -->

      <a href="#" id="back-to-top"></a>
    </div>

    <!-- Javascript Files
    ================================================== -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>

    <!-- <script>
      $(document).ready(function () {
        $("#register_form").on("submit", function (e) {
          e.preventDefault();

          const email = $("#email").val();
          const motDePasse = $("#motDePasse").val();
          const nom = $("#nom").val();
          const confirmationMotDePasse = $("#confirmationMotDePasse").val();
          const role = $("#role").val();
          const telephone = $("#telephone").val();

          console.log(
            email,
            motDePasse,
            nom,
            confirmationMotDePasse,
            role,
            telephone
          );

          // Validation basique
          if (
            !nom ||
            !email ||
            !telephone ||
            !motDePasse ||
            !confirmationMotDePasse ||
            !role
          ) {
            alert("Veuillez remplir tous les champs.");
            return;
          }

          if (motDePasse !== confirmationMotDePasse) {
            alert("Les mots de passe ne correspondent pas.");
            return;
          }

          //   $.ajax({
          //     url: "http://localhost:5000/api/utilisateurs/connexion",
          //     method: "POST",
          //     contentType: "application/json",
          //     data: JSON.stringify({ email, motDePasse }),
          //     success: function (response) {
          //       $("#loginMessage").html(
          //         "<span style='color:green;'>Connexion réussie !</span>"
          //       );
          //       // Tu peux rediriger vers le dashboard ici par exemple :
          //       // window.location.href = "/dashboard.html";
          //       console.log(response);
          //     },
          //     error: function (xhr) {
          //       const message =
          //         xhr.responseJSON?.message || "Erreur lors de la connexion.";
          //       $("#loginMessage").text(message);
          //     },
          //   });
        });
      });
    </script> -->

    <script>
      $(document).ready(function () {
        $("#register_form").on("submit", function (e) {
          e.preventDefault();

          // Récupération des champs
          const nom = $("#nom").val().trim();
          const email = $("#email").val().trim();
          const telephone = $("#telephone").val().trim();
          const motDePasse = $("#motDePasse").val();
          const confirmationMotDePasse = $("#confirmationMotDePasse").val();
          const role = $("#role").val();
          const adresse = $("#adresse").val().trim();

          // Validation basique
          if (
            !nom ||
            !email ||
            !telephone ||
            !motDePasse ||
            !confirmationMotDePasse ||
            !role ||
            !adresse
          ) {
            alert("Veuillez remplir tous les champs.");
            return;
          }

          if (motDePasse !== confirmationMotDePasse) {
            alert("Les mots de passe ne correspondent pas.");
            return;
          }

          console.log(
            nom,
            email,
            telephone,
            motDePasse,
            confirmationMotDePasse,
            adresse
          );

          //Envoi de la requête
          $.ajax({
            url: "http://localhost:5000/api/utilisateurs/inscription",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify({
              nom,
              email,
              telephone,
              confirmationMotDePasse,
              motDePasse,
              role,
              adresse,
            }),
            success: function (response) {
              $("#mail_success").show();
              $("#mail_fail").hide();
              $("#register_form")[0].reset();


              // 🔐 Stockage des infos
              localStorage.setItem("token", response.token);
              localStorage.setItem("utilisateur", JSON.stringify(response.data));
              localStorage.setItem("role", response.data.role);

              setTimeout(()=>
            {
                window.location.href = "espace_locataire.html";
            },800)
            },
            error: function (err) {
              const msg =
                err.responseJSON?.message || "Erreur lors de l'inscription.";
              $("#mail_fail").text(msg).show();
              $("#mail_success").hide();
            },
          });
        });
      });
    </script>
  </body>
</html>
