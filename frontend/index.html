<!DOCTYPE html>
<html lang="zxx">
  <head>
    <title>Rentaly - Multipurpose Vehicle Car Rental Website Template</title>
    <link rel="icon" href="images/icon.png" type="image/gif" sizes="16x16" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      content="Rentaly - Multipurpose Vehicle Car Rental Website Template"
      name="description"
    />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb" />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/coloring.css" rel="stylesheet" type="text/css" />
    <!-- color scheme -->
    <link
      id="colors"
      href="css/colors/scheme-01.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body onload="initialize()">
    <div id="wrapper">
      <!-- page preloader begin -->
      <div id="de-preloader"></div>
      <!-- page preloader close -->

      <!-- header begin -->
      <header class="transparent scroll-light has-topbar">
        <div id="topbar" class="topbar-dark text-light">
          <div class="container">
            <div class="topbar-left xs-hide">
              <div class="topbar-widget">
                <div class="topbar-widget">
                  <a href="#"><i class="fa fa-phone"></i>+208 333 9296</a>
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-envelope"></i>contact@rentaly.com</a
                  >
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-clock-o"></i>Mon - Fri 08.00 - 18.00</a
                  >
                </div>
              </div>
            </div>

            <div class="topbar-right">
              <div class="social-icons">
                <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                <a href="#"><i class="fa fa-youtube fa-lg"></i></a>
                <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                <a href="#"><i class="fa fa-instagram fa-lg"></i></a>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="de-flex sm-pt10">
                <div class="de-flex-col">
                  <div class="de-flex-col">
                    <!-- logo begin -->
                    <div id="logo">
                      <a href="index.html">
                        <img
                          class="logo-1"
                          src="images/logo-light.png"
                          alt=""
                        />
                        <img class="logo-2" src="images/logo.png" alt="" />
                      </a>
                    </div>
                    <!-- logo close -->
                  </div>
                </div>
                <div class="de-flex-col header-col-mid">
                  <ul id="mainmenu">
                    <li>
                      <a class="menu-item" href="index.html">Accueil</a>
                    </li>
                    <li>
                      <a class="menu-item" href="cars.html">Voitures</a>
                    </li>
                    <li>
                      <a class="menu-item" href="cars.html">Contact</a>
                    </li>                  
                  </ul>
                </div>
                 <div class="de-flex-col">

<div class="menu_side_area " id="loginUI">
                    <a href="login.html" class="btn-main">Se connecter</a>
                    <span id="menu-btn"></span>
                  </div>
                                <div class="menu_side_area" id="accountUI">
                                    <div class="de-login-menu">

                                        <span id="de-click-menu-profile" class="de-menu-profile">                           
                                            <img src="images/profile/1.jpg" class="img-fluid photo" alt="">
                                        </span>

                                        

                                        <div id="de-submenu-profile" class="de-submenu">
                                            <div class="d-name">
                                                <h4 class="nom">Monica Lucas</h4>
                                                <span class="text-gray email"></span>
                                                <span class="text-gray role"></span>
                                            </div>

                                            <div class="d-line"></div>

                                            <ul class="menu-col">
                                                <li><a href="account-dashboard.html" id="accountRedirect"><i class="fa fa-home"></i>Tableau de bord</a></li>
                                                <li><a href="account-profile.html"><i class="fa fa-user"></i>Mon profile</a></li>
                                                  <li><span class="deconnexion"><i class="fa fa-sign-out"></i> Se deconnecter</span></li> 
                                            </ul>
                                        </div>
                                        <span id="menu-btn"></span>
                                    </div>
                                </div>
                            </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- header close -->
      <!-- content begin -->
      <div class="no-bottom no-top" id="content">
        <div id="top"></div>
        <section
          id="section-hero"
          aria-label="section"
          class="jarallax no-top no-bottom"
            data-video-src="https://www.youtube.com/watch?v=5qbjKpxfD64"  
        >
          <div class="overlay-bg no-top no-bottom">
            <div class="v-center">
              <div class="container position-relative z1000">
                <div class="row align-items-center">
                  <div class="col-lg-6 text-light">
                    <h4>
                      <span class="id-color"
                        >Bienvenue sur Ardias Cars</span
                      >
                    </h4>
                    <div class="spacer-10"></div>
                    <h1 class="mb-2">Louez une voiture facilement, en toute sécurité, partout et à tout moment.</h1>
                    <div class="spacer-10"></div>
                    <p class="lead">
                      Ardias Cars  est une solution moderne de location de véhicules entre particuliers. Que vous soyez conducteur à la recherche d’un véhicule ou propriétaire souhaitant rentabiliser votre voiture, notre plateforme est faite pour vous.
                    </p>
                  </div>

                  <div class="col-lg-6">
                    <div class="spacer-single sm-hide"></div>
                    <div
                      class="p-4 rounded-3 shadow-soft text-light"
                      data-bgcolor="rgba(0, 0, 0, .6)"
                    >
                      <form   id="rechercher_annonces">

                          <h5>Recherchez. Réservez. Roulez</h5>
                        <div class="spacer-20"></div>

                        <div class="row">
                          <div class="col-lg-12 mb20">
                            <h5>Lieu</h5>
                            <input
                              type="text"
                              name="PickupLocation"
                              placeholder="Entrer le lieu ou vous cherchez une voiture"
                              id="lieu"
                           
                              class="form-control"
                            />

                            <div
                              class="jls-address-preview jls-address-preview--hidden"
                            >
                              <div class="jls-address-preview__header"></div>
                            </div>
                          </div>
 

                          <div class="col-lg-6 mb20">
                            <h5>Date de depot</h5>
                            <div class="date-time-field">
                              <input
                                type="text"
                                id="date-picker"
                                name="Pick Up Date"
                                value=""
                              />
                              <select name="Pick Up Time" id="pickup-time">
                                <option selected disabled value="Select time">
                                  Heure
                                </option>
                                <option value="00:00">00:00</option>
                                <option value="00:30">00:30</option>
                                <option value="01:00">01:00</option>
                                <option value="01:30">01:30</option>
                                <option value="02:00">02:00</option>
                                <option value="02:30">02:30</option>
                                <option value="03:00">03:00</option>
                                <option value="03:30">03:30</option>
                                <option value="04:00">04:00</option>
                                <option value="04:30">04:30</option>
                                <option value="05:00">05:00</option>
                                <option value="05:30">05:30</option>
                                <option value="06:00">06:00</option>
                                <option value="06:30">06:30</option>
                                <option value="07:00">07:00</option>
                                <option value="07:30">07:30</option>
                                <option value="08:00">08:00</option>
                                <option value="08:30">08:30</option>
                                <option value="09:00">09:00</option>
                                <option value="09:30">09:30</option>
                                <option value="10:00">10:00</option>
                                <option value="10:30">10:30</option>
                                <option value="11:00">11:00</option>
                                <option value="11:30">11:30</option>
                                <option value="12:00">12:00</option>
                                <option value="12:30">12:30</option>
                                <option value="13:00">13:00</option>
                                <option value="13:30">13:30</option>
                                <option value="14:00">14:00</option>
                                <option value="14:30">14:30</option>
                                <option value="15:00">15:00</option>
                                <option value="15:30">15:30</option>
                                <option value="16:00">16:00</option>
                                <option value="16:30">16:30</option>
                                <option value="17:00">17:00</option>
                                <option value="17:30">17:30</option>
                                <option value="18:00">18:00</option>
                                <option value="18:30">18:30</option>
                                <option value="19:00">19:00</option>
                                <option value="19:30">19:30</option>
                                <option value="20:00">20:00</option>
                                <option value="20:30">20:30</option>
                                <option value="21:00">21:00</option>
                                <option value="21:30">21:30</option>
                                <option value="22:00">22:00</option>
                                <option value="22:30">22:30</option>
                                <option value="23:00">23:00</option>
                                <option value="23:30">23:30</option>
                              </select>
                            </div>
                          </div>

                          <div class="col-lg-6 mb20">
                            <h5>Date de retour </h5>
                            <div class="date-time-field">
                              <input
                                type="text"
                                id="date-picker-2"
                                name="Collection Date"
                                value=""
                              />
                              <select
                                name="Collection Time"
                                id="collection-time"
                              >
                                <option selected disabled value="Select time">
                                  Heure
                                </option>
                                <option value="00:00">00:00</option>
                                <option value="00:30">00:30</option>
                                <option value="01:00">01:00</option>
                                <option value="01:30">01:30</option>
                                <option value="02:00">02:00</option>
                                <option value="02:30">02:30</option>
                                <option value="03:00">03:00</option>
                                <option value="03:30">03:30</option>
                                <option value="04:00">04:00</option>
                                <option value="04:30">04:30</option>
                                <option value="05:00">05:00</option>
                                <option value="05:30">05:30</option>
                                <option value="06:00">06:00</option>
                                <option value="06:30">06:30</option>
                                <option value="07:00">07:00</option>
                                <option value="07:30">07:30</option>
                                <option value="08:00">08:00</option>
                                <option value="08:30">08:30</option>
                                <option value="09:00">09:00</option>
                                <option value="09:30">09:30</option>
                                <option value="10:00">10:00</option>
                                <option value="10:30">10:30</option>
                                <option value="11:00">11:00</option>
                                <option value="11:30">11:30</option>
                                <option value="12:00">12:00</option>
                                <option value="12:30">12:30</option>
                                <option value="13:00">13:00</option>
                                <option value="13:30">13:30</option>
                                <option value="14:00">14:00</option>
                                <option value="14:30">14:30</option>
                                <option value="15:00">15:00</option>
                                <option value="15:30">15:30</option>
                                <option value="16:00">16:00</option>
                                <option value="16:30">16:30</option>
                                <option value="17:00">17:00</option>
                                <option value="17:30">17:30</option>
                                <option value="18:00">18:00</option>
                                <option value="18:30">18:30</option>
                                <option value="19:00">19:00</option>
                                <option value="19:30">19:30</option>
                                <option value="20:00">20:00</option>
                                <option value="20:30">20:30</option>
                                <option value="21:00">21:00</option>
                                <option value="21:30">21:30</option>
                                <option value="22:00">22:00</option>
                                <option value="22:30">22:30</option>
                                <option value="23:00">23:00</option>
                                <option value="23:30">23:30</option>
                              </select>
                            </div>
                          </div>
                        </div>

                       
                        <button class="btn-main pull-right">Rechercher</button>

                        <div class="clearfix"></div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>

           
   
             
              
            </div>
          </div>
        </section>

        
            </div>
          </div>
        </section>  

        <section id="section-cars">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-lg-6 offset-lg-3 text-center">
                <h2>Resultat de votre recherche</h2>
               
                <div class="spacer-20"></div>
              </div>

              <div class="clearfix"></div>
 
                
              
              <div class="col-lg-12" id="search-results-container">
             <p>Pas encore de recherches</p>
              </div>
             
            </div>
          </div>
        </section>

        <section class="text-light jarallax">
          <img src="images/background/2.jpg" class="jarallax-img" alt="" />
          <div class="container">
            <div class="row g-5">
              <div class="col-lg-12 wow fadeInRight">
                <h2>
                  Nos Chiffres 
                  <span class="id-color">Clés</span> 
                </h2>
              </div>
           
            </div>
            <div class="spacer-double"></div>
            <div class="row text-center">
              <div class="col-md-3 col-sm-6 mb-sm-30">
                <div class="de_count transparent text-light wow fadeInUp">
                  <h3 class="timer" data-to="15425" data-speed="3000">0</h3>
                  Utilisateurs connectés
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-sm-30">
                <div class="de_count transparent text-light wow fadeInUp">
                  <h3 class="timer" data-to="8745" data-speed="3000">0</h3>
                 Locations effectuées
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-sm-30">
                <div class="de_count transparent text-light wow fadeInUp">
                  <h3 class="timer" data-to="235" data-speed="3000">0</h3>
                  Voitures enregistrées
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-sm-30">
                <div class="de_count transparent text-light wow fadeInUp">
                  <h3 class="timer" data-to="15" data-speed="3000">0</h3>
                  Years Experience
                </div>
              </div>
            </div>
          </div>
        </section>      
      
        <section
          id="section-call-to-action"
          class="bg-color-2 pt60 pb60 text-light"
        >
          <div class="container">
            <div class="container">
              <div class="row">
                <div class="col-lg-6 offset-lg-2">
                  <span class="subtitle text-white"
                    >Prêt à prendre la route ?</span
                  >
                  <h2 class="s2">
                    Que vous soyez conducteur ou propriétaire, il est temps de rejoindre la communauté.
                  </h2>
                </div>

                <div class="col-lg-4 text-lg-center text-sm-center">
                  <div class="phone-num-big">
                  
                 
                  <a href="#" class="btn-main">Commencer maintenant</a>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <!-- content close -->
      <a href="#" id="back-to-top"></a>
      <!-- footer begin -->
      <footer class="text-light">
        <div class="container">
          <div class="row g-custom-x">
            <div class="col-lg-6">
              <div class="widget">
                <h5>A propos de Aridias Cars</h5>
                <p>
                  Ardias Cars est une solution moderne de location de véhicules entre particuliers. Que vous soyez conducteur à la recherche d’un véhicule ou propriétaire souhaitant rentabiliser votre voiture, notre plateforme est faite pour vous.
                </p>
              </div>
            </div>

            <div class="col-lg-3">
              <div class="widget">
                <h5>Contact Info</h5>
                <address class="s1">
                  <span
                    ><i class="id-color fa fa-map-marker fa-lg"></i>08 W 36th
                    St, New York, NY 10001</span
                  >
                  <span
                    ><i class="id-color fa fa-phone fa-lg"></i>+1 333 9296</span
                  >
                  <span
                    ><i class="id-color fa fa-envelope-o fa-lg"></i
                    ><a href="mailto:contact@example.com"
                      >contact@example.com</a
                    ></span
                  >
                  <span
                    ><i class="id-color fa fa-file-pdf-o fa-lg"></i
                    ><a href="#">Download Brochure</a></span
                  >
                </address>
              </div>
            </div>

            <div class="col-lg-3">
              <h5>Quick Links</h5>
              <div class="row">
                <div class="col-lg-6">
                  <div class="widget">
                    <ul>
                      <li><a href="#">About</a></li>
                      <li><a href="#">Blog</a></li>
                      <li><a href="#">Careers</a></li>
                      <li><a href="#">News</a></li>
                      <li><a href="#">Partners</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
 
          </div>
        </div>
       
      </footer>
      <!-- footer close -->
    </div>

    <!-- Javascript Files
    ================================================== -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgiM7ogCAA2Y5pgSk2KXZfxF5S_1jsptA&amp;libraries=places&amp;callback=initPlaces"
      async=""
      defer=""
    ></script>
   
    <script>
        $(".deconnexion").click(function () {
          alert("À bientôt !");
          localStorage.clear();
          window.location.href = "login.html";
        });
      </script>

<script>
  $(document).ready(function() {
  $('#rechercher_annonces').submit(function(e) {
    e.preventDefault();
    
    // Formatage des dates
    const dateDebut = new Date($('#date-picker').val());
 
    const dateFin = new Date($('#date-picker-2').val())
    
    const formData = {
      lieu: $('#lieu').val(),
      dateDebut: dateDebut.toISOString(),
      dateFin: dateFin.toISOString()
    };

    console.log(formData);
    // Requête AJAX
    $.ajax({
      url: "http://localhost:5000/api/annonces/rechercherAnnonces",
      type: "POST",
      contentType: "application/json",
      data: JSON.stringify(formData),
      success: function(res) {
        const baseUrl = "http://localhost:5000/uploads/voitures/";
        const annonces = res.data;
        console.log(annonces);
        const conteneur = $("#search-results-container");
        conteneur.empty();

        if (!annonces || annonces.length === 0) {
          conteneur.append("<div class='col-12 text-center py-5'><h4>Aucune annonce trouvée</h4></div>");
          return;
        }

        annonces.forEach((annonce) => {
          const voitureUrl = baseUrl + annonce.voiture.images[0];
          const voiture = annonce.voiture;
          const html = `
            <div class="col-xl-3 col-lg-6">
              <div class="de-item mb30">
                <div class="d-img">
                  <img src="${voitureUrl}" class="img-fluid" alt="${voiture.nom}">
                </div>
                <div class="d-info">
                  <div class="d-text">
                    <h4>${voiture.nom}</h4>
                    <div class="d-item_like">
                      <i class="fa fa-heart"></i><span>${voiture.nombreAvis}</span>
                    </div>
                    <div class="d-atr-group">
                      <span class="d-atr">
                        <img src="images/icons/1-green.svg" alt="Sièges">
                        ${voiture.nombreDeSieges}
                      </span>
                      <span class="d-atr">
                        <img src="images/icons/2-green.svg" alt="Portes">
                        ${voiture.nombreDePortes}
                      </span>
                      <span class="d-atr">
                        <img src="images/icons/3-green.svg" alt="Transmission">
                        ${voiture.transmission}
                      </span>
                      <span class="d-atr">
                        <img src="images/icons/4-green.svg" alt="Marque">
                        ${voiture.marque}
                      </span>
                    </div>
                    <small class="text-muted d-block mb-2">
                      Disponible du ${new Date(annonce.dateDebut).toLocaleDateString('fr-FR')} 
                      au ${new Date(annonce.dateFin).toLocaleDateString('fr-FR')}
                    </small>
                    <div class="d-price">
                      À partir de <span>${voiture.tarifParJour}€/j</span>
                      <a class="btn-main" href="car-single.html?id=${annonce._id}">Réserver maintenant</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
          conteneur.append(html);
        });
      },
      error: function(err) {
        console.error("Erreur :", err);
        $("#search-results-container").html(`
          <div class="col-12 alert alert-danger">
            Erreur lors de la recherche : ${err.responseJSON?.message || 'Erreur serveur'}
          </div>
        `);
      }
    });
  });
});
</script>

<!-- <script>
  $(document).ready(function() {
  $('#rechercher_annonces').submit(async function(e) {
    e.preventDefault();
    
    // Afficher le loader
    $('#section-cars').addClass('d-none');
    $('#loading-spinner').removeClass('d-none');

    try {
      // Récupération des données
      const formData = {
        lieu: $('#lieu').val(),
        dateDebut: $('#date-picker').val() + 'T' + $('#pickup-time').val(),
        dateFin: $('#date-picker-2').val() + 'T' + $('#collection-time').val()
      };

      console.log(formData);

      // Requête AJAX
      const response = await $.ajax({
        url: 'https://localhost:5000/api/annonces/rechercherAnnonces',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(formData)
      });

      // Générer le HTML des résultats
      const resultsHtml = generateResultsHtml(response.data);
      
      // Mise à jour de l'UI
      $('#search-results-container').html(resultsHtml);
      $('#section-cars').removeClass('d-none');
      
    } catch (error) {
      showError('Une erreur est survenue : ' + error.responseJSON?.message);
    } finally {
      $('#loading-spinner').addClass('d-none');
    }
  });

  function generateResultsHtml(annonces) {
    if (!annonces.length) {
      return `<div class="col-12 text-center py-5">
                <h4>Aucun véhicule trouvé pour ces critères</h4>
              </div>`;
    }

  //   return annonces.map(annonce => {
  //     const v = annonce.voiture;
  //     return `
  //       <div class="col-xl-4 col-lg-6">
  //         <div class="de-item mb30">
  //           <div class="d-img">
  //             <img src="${v.images[0]}" class="img-fluid" alt="${v.marque} ${v.modele}">
  //           </div>
  //           <div class="d-info">
  //             <div class="d-text">
  //               <h4>${v.marque} ${v.modele}</h4>
  //               <div class="d-item_like">
  //                 <i class="fa fa-heart"></i><span>${v.nombreAvis}</span>
  //               </div>
  //               <div class="d-atr-group">
  //                 <span class="d-atr">
  //                   <img src="images/icons/4-green.svg" alt="Transmission">
  //                   ${v.transmission}
  //                 </span>
  //                 <span class="d-atr">
  //                   <img src="images/icons/3-green.svg" alt="Carburant">
  //                   ${formatCarburant(v.carburant)}
  //                 </span>
  //                 <span class="d-atr">
  //                   <img src="images/icons/1-green.svg" alt="Sièges">
  //                   ${v.nombreDeSieges}
  //                 </span>
  //                 <span class="d-atr">
  //                   <img src="images/icons/2-green.svg" alt="Portes">
  //                   ${v.nombreDePortes}
  //                 </span>
  //               </div>
  //               <div class="d-price">
  //                 À partir de <span>${v.tarifParJour}€/jour</span>
  //                 <a class="btn-main" href="car-single.html?id=${v._id}">Réserver maintenant</a>
  //               </div>
  //             </div>
  //           </div>
  //         </div>
  //       </div>
  //     `;
  //   }).join('');
  // }

  return    annonces.forEach((annonce) => {
   const baseUrl = "http://localhost:5000/uploads/voitures/";
              const voitureUrl = baseUrl + annonce.voiture.images[0];
              const voiture = annonce.voiture;
              const html = `
                <div class="col-xl-4 col-lg-6">
                  <div class="de-item mb30">
                    <div class="d-img">
                      <img src="${voitureUrl}" class="img-fluid" alt="">
                    </div>
                    <div class="d-info">
                      <div class="d-text">
                        <h4>${voiture.nom}</h4>
                        <div class="d-item_like">
                          <i class="fa fa-heart"></i><span>0</span>
                        </div>
                        <div class="d-atr-group">
                          <span class="d-atr"><img src="images/icons/1-green.svg" alt="">${
                            voiture.nombreDeSieges
                          }</span>
                          <span class="d-atr"><img src="images/icons/2-green.svg" alt="">${
                            voiture.nombreDePortes
                          }</span>
                          <span class="d-atr"><img src="images/icons/3-green.svg" alt="">${
                            voiture.transmission
                          }</span>
                          <span class="d-atr"><img src="images/icons/4-green.svg" alt="">${
                            voiture.marque
                          }</span>
                        </div>
                        Disponible du ${new Date(
                          annonce.dateDebut
                        ).toLocaleDateString()} au ${new Date(
                annonce.dateFin
              ).toLocaleDateString()}
 
                        <div class="d-price">
                          A partir de <span>$${voiture.tarifParJour}</span>
                          <a class="btn-main" href="car-single.html?id=${
                            annonce._id
                          }">Reserver maintenant</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              `;
              conteneur.append(html);
            });
          }
  function formatCarburant(type) {
    const types = {
      'essence': 'Essence',
      'diesel': 'Diesel',
      'electrique': 'Électrique'
    };
    return types[type.toLowerCase()] || type;
  }

  function showError(message) {
    const errorHtml = `
      <div class="col-12 alert alert-danger">
        ${message}
      </div>
    `;
    $('#search-results-container').html(errorHtml);
    $('#section-cars').removeClass('d-none');
  }
});
</script> -->
 
  

 <script>
        $(document).ready(function () {
            // Charger les données du profil

            const userProfileUrl = "http://localhost:5000/uploads/utilisateurs/";
              const token = localStorage.getItem("token");

    if (!token) {
      // Aucune connexion
      $("#loginUI").show();
      $("#accountUI").hide();
      return;
    }else{
      
      $("#accountUI").show();
      $("#loginUI").hide();
    }
        $.ajax({
          url: "http://localhost:5000/api/utilisateurs/obtenirMonProfil",
          method: "GET",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("token"),
          },
          success: function (user) {
              const profileUrl = userProfileUrl + user?.data.photo;
            console.log(user?.data.photo)
            $(".nom").text(user?.data?.nom);
            $(".email").text(user?.data.email);
            $(".photo").attr("src", profileUrl);
            $("#photo").attr("src", profileUrl);
            $("#pays").text(user?.data.pays || "Non renseigné.");
            $("#dateNaissance").text(user?.data.dateNaissance || "Non renseigné.");
            $("#biographie").text(user?.data.biographie || "Aucune biographie fournie.");
            $("#adresse").text(user?.data.adresse || "Non renseigné.");
            $("#telephone").text(user?.data.telephone || "Non renseignné.");
            $(".role").text(user?.data.role || "Non renseignné.");
            $("#sexe").text(user?.data.sexe || "Non renseignné.");


                 // Affichage conditionnel
      if (user?.data.role === "admin" || user?.data.role === "ambassadeur" || user?.data.role === "etudiant") {
        $("#info-administrative").hide();     // Masquer mot de passe
        $("#info-academique").hide();     // Masquer mot de passe
        $("#saveBtn").hide();         // Masquer bouton "Enregistrer"
      }

      if(user?.data.role ==="proprietaire"){
        $("#accountRedirect").attr("href", "account-dashboard.html");
        $("#accountRedirect").text("Tableau de bord");
        
      }else{
        
        $("#accountRedirect").attr("href", "espace_locataire.html");
        $("#accountRedirect").text("Mon compte");
      }
          },
          error: function () {
              console.log("Erreur lors du chargement du profil !");
            },
        });})
        </script>
      
  </body>
</html>
