<!DOCTYPE html>
<html lang="zxx">
  <head>
    <title>Rentaly - Multipurpose Vehicle Car Rental Website Template</title>
    <link rel="icon" href="images/icon.png" type="image/gif" sizes="16x16" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      content="Rentaly - Multipurpose Vehicle Car Rental Website Template"
      name="description"
    />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb" />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/coloring.css" rel="stylesheet" type="text/css" />
    <!-- color scheme -->
    <link
      id="colors"
      href="css/colors/scheme-01.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body>
    <div id="wrapper">
      <!-- page preloader begin -->
      <div id="de-preloader"></div>
      <!-- page preloader close -->

      <!-- header begin -->
      <header class="transparent scroll-light has-topbar">
        <div id="topbar" class="topbar-dark text-light">
          <div class="container">
            <div class="topbar-left xs-hide">
              <div class="topbar-widget">
                <div class="topbar-widget">
                  <a href="#"><i class="fa fa-phone"></i>+208 333 9296</a>
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-envelope"></i>contact@rentaly.com</a
                  >
                </div>
                <div class="topbar-widget">
                  <a href="#"
                    ><i class="fa fa-clock-o"></i>Mon - Fri 08.00 - 18.00</a
                  >
                </div>
              </div>
            </div>

            <div class="topbar-right">
              <div class="social-icons">
                <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                <a href="#"><i class="fa fa-youtube fa-lg"></i></a>
                <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                <a href="#"><i class="fa fa-instagram fa-lg"></i></a>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="de-flex sm-pt10">
                <div class="de-flex-col">
                  <div class="de-flex-col">
                    <!-- logo begin -->
                    <div id="logo">
                      <a href="index.html">
                        <img
                          class="logo-1"
                          src="images/logo-light.png"
                          alt=""
                        />
                        <img class="logo-2" src="images/logo.png" alt="" />
                      </a>
                    </div>
                    <!-- logo close -->
                  </div>
                </div>
                <div class="de-flex-col header-col-mid">
                  <ul id="mainmenu">
                    <li>
                      <a class="menu-item" href="index.html">Accueil</a>
                    </li>
                    <li>
                      <a class="menu-item" href="cars.html">Voitures</a>
                    </li>
                    <li>
                      <a class="menu-item" href="cars.html">Contact</a>
                    </li>
                  </ul>
                </div>
                <div class="de-flex-col">
                  <div class="menu_side_area">
                    <div class="de-login-menu">
                      <span id="de-click-menu-profile" class="de-menu-profile">
                        <img
                          src="images/profile/1.jpg"
                          class="img-fluid"
                          alt=""
                        />
                      </span>

                      <div id="de-submenu-profile" class="de-submenu">
                        <div class="d-name">
                          <h4>Monica Lucas</h4>
                          <span class="text-gray">monica@rentaly.com</span>
                        </div>

                        <div class="d-line"></div>

                        <ul class="menu-col">
                          <li>
                            <a href="account-dashboard.html"
                              ><i class="fa fa-home"></i>Tableau de bord</a
                            >
                          </li>
                          <li>
                            <a href="account-profile.html"
                              ><i class="fa fa-user"></i>Mon profil</a
                            >
                          </li>
                          <li>
                            <a href="account-booking.html"
                              ><i class="fa fa-calendar"></i>Mes r√©servations</a
                            >
                          </li>
                          <li>
                            <a href="account-favorite.html"
                              ><i class="fa fa-car"></i>My Favorite Cars</a
                            >
                          </li>
                          <li>
                            <a href="login.html"
                              ><i class="fa fa-sign-out"></i>Se deconnecter
                            </a>
                          </li>
                        </ul>
                      </div>
                      <span id="menu-btn"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- header close -->
      <!-- content begin -->
      <div class="no-bottom no-top zebra" id="content">
        <div id="top"></div>

        <!-- section begin -->
        <section id="subheader" class="jarallax text-light">
          <img src="images/background/14.jpg" class="jarallax-img" alt="" />
          <div class="center-y relative text-center">
            <div class="container">
              <div class="row">
                <div class="col-md-12 text-center">
                  <h1>Publier une annonce</h1>
                </div>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </section>
        <!-- section close -->

        <section id="section-settings" class="bg-gray-100">
          <div class="container">
            <div class="row">
              <div class="col-lg-3 mb30">
                <div class="card p-4 rounded-5">
                  <div class="profile_avatar">
                    <div class="profile_img">
                      <img src="images/profile/1.jpg" alt="" />
                    </div>
                    <div class="profile_name">
                      <h4>
                        Monica Lucas
                        <span class="profile_username text-gray"
                          >monica@rentaly.com</span
                        >
                      </h4>
                    </div>
                  </div>
                  <div class="spacer-20"></div>
                  <ul class="menu-col">
                    <li>
                      <a href="account-dashboard.html"
                        ><i class="fa fa-home"></i>Dashboard</a
                      >
                    </li>
                    <li>
                      <a href="account-profile.html" class="active"
                        ><i class="fa fa-user"></i>My Profile</a
                      >
                    </li>
                    <li>
                      <a href="account-booking.html"
                        ><i class="fa fa-calendar"></i>My Orders</a
                      >
                    </li>
                    <li>
                      <a href="account-favorite.html"
                        ><i class="fa fa-car"></i>My Favorite Cars</a
                      >
                    </li>
                    <li>
                      <a href="login.html"
                        ><i class="fa fa-sign-out"></i>Sign Out</a
                      >
                    </li>
                  </ul>
                </div>
              </div>

              <div class="col-lg-9">
                <div class="card p-4 rounded-5">
                  <div class="row">
                    <div class="col-lg-12">
                      <div id="form-create-item" class="form-border">
                        <div class="de_tab tab_simple">
                          <ul class="de_nav">
                            <li class="active">
                              <span>Ajouter une nouvelle annonce</span>
                            </li>
                          </ul>

                          <div class="de_tab_content">
                            <form id="form-ajout-annonce">
                              <div class="row">
                                <div class="col-lg-6 mb20">
                                  <h5>Titre</h5>
                                  <input
                                    type="text"
                                    name="titire"
                                    id="titire"
                                    class="form-control"
                                    placeholder="renseignez ce champs"
                                  />
                                </div>
                                <div class="col-lg-6 mb20">
                                  <h5>Description</h5>
                                  <input
                                    type="text"
                                    name="modele"
                                    id="modele"
                                    class="form-control"
                                    placeholder="renseignez ce champs"
                                  />
                                </div>
                                <div class="col-lg-6 mb20">
                                  <h5>Lieu</h5>
                                  <input
                                    type="text"
                                    name="modele"
                                    id="modele"
                                    class="form-control"
                                    placeholder="renseignez ce champs"
                                  />
                                </div>
                                <div class="col-lg-6 mb20">
                                  <h5>Date de debut</h5>
                                  <div class="date-time-field">
                                    <input
                                      type="datetime-local"
                                      id="date-debut"
                                      name="Pick Up Date"
                                      value=""
                                    />
                                    <!-- <select
                                      name="Pick Up Time"
                                      id="heure-debut"
                                    >
                                      <option
                                        selected
                                        disabled
                                        value="Select time"
                                      >
                                        Heure
                                      </option>
                                      <option value="00:00">00:00</option>
                                      <option value="00:30">00:30</option>
                                      <option value="01:00">01:00</option>
                                      <option value="01:30">01:30</option>
                                      <option value="02:00">02:00</option>
                                      <option value="02:30">02:30</option>
                                      <option value="03:00">03:00</option>
                                      <option value="03:30">03:30</option>
                                      <option value="04:00">04:00</option>
                                      <option value="04:30">04:30</option>
                                      <option value="05:00">05:00</option>
                                      <option value="05:30">05:30</option>
                                      <option value="06:00">06:00</option>
                                      <option value="06:30">06:30</option>
                                      <option value="07:00">07:00</option>
                                      <option value="07:30">07:30</option>
                                      <option value="08:00">08:00</option>
                                      <option value="08:30">08:30</option>
                                      <option value="09:00">09:00</option>
                                      <option value="09:30">09:30</option>
                                      <option value="10:00">10:00</option>
                                      <option value="10:30">10:30</option>
                                      <option value="11:00">11:00</option>
                                      <option value="11:30">11:30</option>
                                      <option value="12:00">12:00</option>
                                      <option value="12:30">12:30</option>
                                      <option value="13:00">13:00</option>
                                      <option value="13:30">13:30</option>
                                      <option value="14:00">14:00</option>
                                      <option value="14:30">14:30</option>
                                      <option value="15:00">15:00</option>
                                      <option value="15:30">15:30</option>
                                      <option value="16:00">16:00</option>
                                      <option value="16:30">16:30</option>
                                      <option value="17:00">17:00</option>
                                      <option value="17:30">17:30</option>
                                      <option value="18:00">18:00</option>
                                      <option value="18:30">18:30</option>
                                      <option value="19:00">19:00</option>
                                      <option value="19:30">19:30</option>
                                      <option value="20:00">20:00</option>
                                      <option value="20:30">20:30</option>
                                      <option value="21:00">21:00</option>
                                      <option value="21:30">21:30</option>
                                      <option value="22:00">22:00</option>
                                      <option value="22:30">22:30</option>
                                      <option value="23:00">23:00</option>
                                      <option value="23:30">23:30</option>
                                    </select> -->
                                  </div>
                                </div>
                                <div class="col-lg-6 mb20">
                                  <h5>Date de debut</h5>
                                  <div class="date-time-field">
                                    <input
                                      type="datetime-local"
                                      id="date-fin"
                                      name="Pick Up Date"
                                      value=""
                                    />
                                    <!-- <select
                                      name="Pick Up Time"
                                      id="heure-fin"
                                    >
                                      <option
                                        selected
                                        disabled
                                        value="Select time"
                                      >
                                        Heure
                                      </option>
                                      <option value="00:00">00:00</option>
                                      <option value="00:30">00:30</option>
                                      <option value="01:00">01:00</option>
                                      <option value="01:30">01:30</option>
                                      <option value="02:00">02:00</option>
                                      <option value="02:30">02:30</option>
                                      <option value="03:00">03:00</option>
                                      <option value="03:30">03:30</option>
                                      <option value="04:00">04:00</option>
                                      <option value="04:30">04:30</option>
                                      <option value="05:00">05:00</option>
                                      <option value="05:30">05:30</option>
                                      <option value="06:00">06:00</option>
                                      <option value="06:30">06:30</option>
                                      <option value="07:00">07:00</option>
                                      <option value="07:30">07:30</option>
                                      <option value="08:00">08:00</option>
                                      <option value="08:30">08:30</option>
                                      <option value="09:00">09:00</option>
                                      <option value="09:30">09:30</option>
                                      <option value="10:00">10:00</option>
                                      <option value="10:30">10:30</option>
                                      <option value="11:00">11:00</option>
                                      <option value="11:30">11:30</option>
                                      <option value="12:00">12:00</option>
                                      <option value="12:30">12:30</option>
                                      <option value="13:00">13:00</option>
                                      <option value="13:30">13:30</option>
                                      <option value="14:00">14:00</option>
                                      <option value="14:30">14:30</option>
                                      <option value="15:00">15:00</option>
                                      <option value="15:30">15:30</option>
                                      <option value="16:00">16:00</option>
                                      <option value="16:30">16:30</option>
                                      <option value="17:00">17:00</option>
                                      <option value="17:30">17:30</option>
                                      <option value="18:00">18:00</option>
                                      <option value="18:30">18:30</option>
                                      <option value="19:00">19:00</option>
                                      <option value="19:30">19:30</option>
                                      <option value="20:00">20:00</option>
                                      <option value="20:30">20:30</option>
                                      <option value="21:00">21:00</option>
                                      <option value="21:30">21:30</option>
                                      <option value="22:00">22:00</option>
                                      <option value="22:30">22:30</option>
                                      <option value="23:00">23:00</option>
                                      <option value="23:30">23:30</option>
                                    </select> -->
                                  </div>
                                </div>

                                <div class="col-lg-12 mt-3">
                                  <button type="submit" class="btn btn-primary">
                                    Publier
                                  </button>
                                </div>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <!-- content close -->
      <a href="#" id="back-to-top"></a>
    </div>

    <!-- Javascript Files
    ================================================== -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>


    
    <script>
        $(".deconnexion").click(function () {
          alert("√Ä bient√¥t !");
          localStorage.clear();
          window.location.href = "login.html";
        });
      </script>


    <script>
      $(document).ready(function () {
        // üîç Fonction pour extraire un param√®tre d'URL
        function getVoitureIdFromUrl() {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get("id"); // ex: ?id=6818bce54a600efe2a9ca2ce
        }

        $("#form-ajout-annonce").on("submit", function (e) {
          e.preventDefault(); // Emp√™che le rechargement

          const voitureId = getVoitureIdFromUrl();

          // R√©cup√©ration des champs
          const titre = $("#titire").val().trim();
          const description = $("#modele").val().trim(); // attention : m√™me id pour 2 champs !
          const lieu = $("input[name='modele']").eq(1).val().trim(); // deuxi√®me input[name=modele]

          const dateDebut = $("#date-debut").eq(0).val();
          const dateFin = $("#date-fin").eq(0).val();
          console.log("Voiture ID:", voitureId);

          if (!voitureId) {
            alert("Identifiant de voiture manquant dans l'URL.");
            return;
          }
          const data = {
            titre,
            description,
            lieu,
            dateDebut,
            dateFin,
            voiture: voitureId,
          };

          console.log("Donn√©es √† envoyer :", data);

          $.ajax({
            url: "http://localhost:5000/api/annonces/",
            method: "POST",
            headers: {
              Authorization: "Bearer " + localStorage.getItem("token"), // Ajoutez l'authentification
            },
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function (response) {
              alert("‚úÖ Publication r√©ussie !");
              setTimeout(() => {
                window.location.href = "account-dashboard.html"; // √† adapter selon ton fichier
              }, 1000);
            },
            error: function (xhr) {
              alert("‚ùå Erreur lors de la publication : " + xhr.responseText);
              console.log(xhr.responseText);
            },
          });
        });
      });
    </script>
  </body>
</html>
